
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://semyonsinchenko.github.io/tsumugi-spark/python/main_structures/">
      
      
        <link rel="prev" href="../../concepts/usecases/">
      
      
        <link rel="next" href="../reference/SUMMARY/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.35">
    
    
      
        <title>Main data structures - Tsumugi</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.35f28582.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#main-data-structures-and-classes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Tsumugi" class="md-header__button md-logo" aria-label="Tsumugi" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Tsumugi
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Main data structures
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/semyonsinchenko/tsumugi-spark" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    semyonsinchenko/tsumugi-spark
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../concepts/concepts/" class="md-tabs__link">
          
  
    
  
  About

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
    
  
  Python API

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../notebooks/basic_example/" class="md-tabs__link">
          
  
    
  
  Example Notebooks

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Tsumugi" class="md-nav__button md-logo" aria-label="Tsumugi" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Tsumugi
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/semyonsinchenko/tsumugi-spark" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    semyonsinchenko/tsumugi-spark
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    About
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/concepts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Concepts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/usecases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usecases
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Python API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Python API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Main data structures
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Main data structures
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#analyzers" class="md-nav__link">
    <span class="md-ellipsis">
      Analyzers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Analyzers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#analyzer-options" class="md-nav__link">
    <span class="md-ellipsis">
      Analyzer Options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#where-option" class="md-nav__link">
    <span class="md-ellipsis">
      Where option
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Constraints
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Constraints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alternative-definition-of-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Alternative definition of constraints
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#checks" class="md-nav__link">
    <span class="md-ellipsis">
      Checks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Checks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#level" class="md-nav__link">
    <span class="md-ellipsis">
      Level
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description" class="md-nav__link">
    <span class="md-ellipsis">
      Description
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constraints_1" class="md-nav__link">
    <span class="md-ellipsis">
      Constraints
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verificationsuite" class="md-nav__link">
    <span class="md-ellipsis">
      VerificationSuite
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VerificationSuite">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#row-level-results" class="md-nav__link">
    <span class="md-ellipsis">
      Row-level results
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#required-analyzers" class="md-nav__link">
    <span class="md-ellipsis">
      Required analyzers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checks_1" class="md-nav__link">
    <span class="md-ellipsis">
      Checks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anomaly-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Anomaly Detection
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Anomaly Detection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-and-repository" class="md-nav__link">
    <span class="md-ellipsis">
      Key and repository
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anomaly-detection-builder" class="md-nav__link">
    <span class="md-ellipsis">
      Anomaly Detection Builder
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/SUMMARY/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Example Notebooks
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Example Notebooks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/basic_example/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basic usage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/using_where/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using predicates
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#analyzers" class="md-nav__link">
    <span class="md-ellipsis">
      Analyzers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Analyzers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#analyzer-options" class="md-nav__link">
    <span class="md-ellipsis">
      Analyzer Options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#where-option" class="md-nav__link">
    <span class="md-ellipsis">
      Where option
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Constraints
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Constraints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alternative-definition-of-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Alternative definition of constraints
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#checks" class="md-nav__link">
    <span class="md-ellipsis">
      Checks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Checks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#level" class="md-nav__link">
    <span class="md-ellipsis">
      Level
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description" class="md-nav__link">
    <span class="md-ellipsis">
      Description
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constraints_1" class="md-nav__link">
    <span class="md-ellipsis">
      Constraints
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verificationsuite" class="md-nav__link">
    <span class="md-ellipsis">
      VerificationSuite
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VerificationSuite">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#row-level-results" class="md-nav__link">
    <span class="md-ellipsis">
      Row-level results
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#required-analyzers" class="md-nav__link">
    <span class="md-ellipsis">
      Required analyzers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checks_1" class="md-nav__link">
    <span class="md-ellipsis">
      Checks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anomaly-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Anomaly Detection
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Anomaly Detection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-and-repository" class="md-nav__link">
    <span class="md-ellipsis">
      Key and repository
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anomaly-detection-builder" class="md-nav__link">
    <span class="md-ellipsis">
      Anomaly Detection Builder
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="main-data-structures-and-classes">Main Data Structures and classes</h1>
<p>The Tsumugi project is built on top of classes generated by the protobuf compiler from protobuf messages. While the generated code is part of the Tsumugi python-client distribution, it is strongly recommended not to use these classes directly. From a developer's perspective, protobuf messages should be considered part of the internal API, not the public API. I cannot provide any guarantees that these messages will always remain backward compatible.</p>
<h2 id="analyzers">Analyzers</h2>
<p>Each analyzer in the python-client is at the same moment a <code>dataclass</code> but also it inherits a parent class <code>AbstractAnalyzer</code>.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>  <span class="k">class</span> <span class="nc">AbstractAnalyzer</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">      </span><span class="sd">&quot;&quot;&quot;Abstract class for all analyzers in tsumugi.&quot;&quot;&quot;</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>      <span class="nd">@abstractmethod</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>      <span class="k">def</span> <span class="nf">_to_proto</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">proto</span><span class="o">.</span><span class="n">Analyzer</span><span class="p">:</span> <span class="o">...</span>
</span></code></pre></div>
<p>The majority of Tusumugi's python-client code serves as a thin facade over generated code. As a result, there is minimal implementation: each analyzer contains only the information necessary to create a corresponding protobuf message. The only private method is <code>_to_proto(self) -&gt; proto.Analyzer</code>, creates a message from the fields of the dataclass.</p>
<h3 id="analyzer-options">Analyzer Options</h3>
<p>Most of the Deequ analyzers accept an <code>AnalyzerOption</code> object as an optional argument. This object defines how the analyzer should handle NULL values in the checked columns and how it should operate if the user requests row-level results.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>  <span class="nd">@dataclass</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>  <span class="k">class</span> <span class="nc">AnalyzerOptions</span><span class="p">:</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">      </span><span class="sd">&quot;&quot;&quot;Container for Analyzer Options.&quot;&quot;&quot;</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>      <span class="n">null_behaviour</span><span class="p">:</span> <span class="n">NullBehaviour</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>      <span class="n">filtered_row_outcome</span><span class="p">:</span> <span class="n">FilteredRowOutcome</span>
</span></code></pre></div>
<p><code>null_behaviour</code>: should be one of:</p>
<ul>
<li><code>IGNORE</code>: we just ignore nulls in the column;</li>
<li><code>EMPTY_STRING</code>: we should pass empty string instead of NULL;</li>
<li><code>FAIL</code>: our analyzer should fail if there is NULL;</li>
</ul>
<p><code>filtered_row_outcome</code>: should be one of:</p>
<ul>
<li><code>NULL</code>: in that case filtered rows should be marked as NULL;</li>
<li><code>TRUE</code>: in that case filtered rows should be marked as Boolean <code>True</code>;</li>
</ul>
<p>The default implementation use <code>NullBehaviour.IGNORE</code> and <code>FilteredRowOutcome.NULL</code> values.</p>
<h3 id="where-option">Where option</h3>
<p>Most analyzers accept <code>where</code> as an optional parameter. It should be an SQL-like predicate that is applied before the computation of the metric and comparison with the constraint. This can be useful, for example, when you need to compute metrics for different groups.</p>
<p>Let's imagine we heave the following data:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="w">  </span>+------------+-----------+------------+-----------+-------+
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">  </span><span class="p">|</span>sepal_length<span class="p">|</span>sepal_width<span class="p">|</span>petal_length<span class="p">|</span>petal_width<span class="p">|</span>species<span class="p">|</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">  </span>+------------+-----------+------------+-----------+-------+
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">  </span><span class="p">|</span><span class="w">         </span><span class="m">5</span>.1<span class="p">|</span><span class="w">        </span><span class="m">3</span>.5<span class="p">|</span><span class="w">         </span><span class="m">1</span>.4<span class="p">|</span><span class="w">        </span><span class="m">0</span>.2<span class="p">|</span><span class="w"> </span>setosa<span class="p">|</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">  </span><span class="p">|</span><span class="w">         </span><span class="m">4</span>.9<span class="p">|</span><span class="w">        </span><span class="m">3</span>.0<span class="p">|</span><span class="w">         </span><span class="m">1</span>.4<span class="p">|</span><span class="w">        </span><span class="m">0</span>.2<span class="p">|</span><span class="w"> </span>setosa<span class="p">|</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">  </span><span class="p">|</span><span class="w">         </span><span class="m">4</span>.7<span class="p">|</span><span class="w">        </span><span class="m">3</span>.2<span class="p">|</span><span class="w">         </span><span class="m">1</span>.3<span class="p">|</span><span class="w">        </span><span class="m">0</span>.2<span class="p">|</span><span class="w"> </span>setosa<span class="p">|</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">  </span><span class="p">|</span><span class="w">         </span><span class="m">4</span>.6<span class="p">|</span><span class="w">        </span><span class="m">3</span>.1<span class="p">|</span><span class="w">         </span><span class="m">1</span>.5<span class="p">|</span><span class="w">        </span><span class="m">0</span>.2<span class="p">|</span><span class="w"> </span>setosa<span class="p">|</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">  </span><span class="p">|</span><span class="w">         </span><span class="m">5</span>.0<span class="p">|</span><span class="w">        </span><span class="m">3</span>.6<span class="p">|</span><span class="w">         </span><span class="m">1</span>.4<span class="p">|</span><span class="w">        </span><span class="m">0</span>.2<span class="p">|</span><span class="w"> </span>setosa<span class="p">|</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">  </span><span class="p">|</span><span class="w">         </span><span class="m">5</span>.4<span class="p">|</span><span class="w">        </span><span class="m">3</span>.9<span class="p">|</span><span class="w">         </span><span class="m">1</span>.7<span class="p">|</span><span class="w">        </span><span class="m">0</span>.4<span class="p">|</span><span class="w"> </span>setosa<span class="p">|</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">  </span><span class="p">|</span><span class="w">         </span><span class="m">4</span>.6<span class="p">|</span><span class="w">        </span><span class="m">3</span>.4<span class="p">|</span><span class="w">         </span><span class="m">1</span>.4<span class="p">|</span><span class="w">        </span><span class="m">0</span>.3<span class="p">|</span><span class="w"> </span>setosa<span class="p">|</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">  </span><span class="p">|</span><span class="w">         </span><span class="m">5</span>.0<span class="p">|</span><span class="w">        </span><span class="m">3</span>.4<span class="p">|</span><span class="w">         </span><span class="m">1</span>.5<span class="p">|</span><span class="w">        </span><span class="m">0</span>.2<span class="p">|</span><span class="w"> </span>setosa<span class="p">|</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">  </span><span class="p">|</span><span class="w">         </span><span class="m">4</span>.4<span class="p">|</span><span class="w">        </span><span class="m">2</span>.9<span class="p">|</span><span class="w">         </span><span class="m">1</span>.4<span class="p">|</span><span class="w">        </span><span class="m">0</span>.2<span class="p">|</span><span class="w"> </span>setosa<span class="p">|</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">  </span><span class="p">|</span><span class="w">         </span><span class="m">4</span>.9<span class="p">|</span><span class="w">        </span><span class="m">3</span>.1<span class="p">|</span><span class="w">         </span><span class="m">1</span>.5<span class="p">|</span><span class="w">        </span><span class="m">0</span>.1<span class="p">|</span><span class="w"> </span>setosa<span class="p">|</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="w">  </span><span class="p">|</span><span class="w">         </span><span class="m">5</span>.4<span class="p">|</span><span class="w">        </span><span class="m">3</span>.7<span class="p">|</span><span class="w">         </span><span class="m">1</span>.5<span class="p">|</span><span class="w">        </span><span class="m">0</span>.2<span class="p">|</span><span class="w"> </span>setosa<span class="p">|</span>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="w">  </span><span class="p">|</span><span class="w">         </span><span class="m">4</span>.8<span class="p">|</span><span class="w">        </span><span class="m">3</span>.4<span class="p">|</span><span class="w">         </span><span class="m">1</span>.6<span class="p">|</span><span class="w">        </span><span class="m">0</span>.2<span class="p">|</span><span class="w"> </span>setosa<span class="p">|</span>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="w">  </span><span class="p">|</span><span class="w">         </span><span class="m">4</span>.8<span class="p">|</span><span class="w">        </span><span class="m">3</span>.0<span class="p">|</span><span class="w">         </span><span class="m">1</span>.4<span class="p">|</span><span class="w">        </span><span class="m">0</span>.1<span class="p">|</span><span class="w"> </span>setosa<span class="p">|</span>
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a><span class="w">  </span><span class="p">|</span><span class="w">         </span><span class="m">4</span>.3<span class="p">|</span><span class="w">        </span><span class="m">3</span>.0<span class="p">|</span><span class="w">         </span><span class="m">1</span>.1<span class="p">|</span><span class="w">        </span><span class="m">0</span>.1<span class="p">|</span><span class="w"> </span>setosa<span class="p">|</span>
</span><span id="__span-2-18"><a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="w">  </span><span class="p">|</span><span class="w">         </span><span class="m">5</span>.8<span class="p">|</span><span class="w">        </span><span class="m">4</span>.0<span class="p">|</span><span class="w">         </span><span class="m">1</span>.2<span class="p">|</span><span class="w">        </span><span class="m">0</span>.2<span class="p">|</span><span class="w"> </span>setosa<span class="p">|</span>
</span><span id="__span-2-19"><a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="w">  </span><span class="p">|</span><span class="w">         </span><span class="m">5</span>.7<span class="p">|</span><span class="w">        </span><span class="m">4</span>.4<span class="p">|</span><span class="w">         </span><span class="m">1</span>.5<span class="p">|</span><span class="w">        </span><span class="m">0</span>.4<span class="p">|</span><span class="w"> </span>setosa<span class="p">|</span>
</span><span id="__span-2-20"><a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="w">  </span><span class="p">|</span><span class="w">         </span><span class="m">5</span>.4<span class="p">|</span><span class="w">        </span><span class="m">3</span>.9<span class="p">|</span><span class="w">         </span><span class="m">1</span>.3<span class="p">|</span><span class="w">        </span><span class="m">0</span>.4<span class="p">|</span><span class="w"> </span>setosa<span class="p">|</span>
</span><span id="__span-2-21"><a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="w">  </span><span class="p">|</span><span class="w">         </span><span class="m">5</span>.1<span class="p">|</span><span class="w">        </span><span class="m">3</span>.5<span class="p">|</span><span class="w">         </span><span class="m">1</span>.4<span class="p">|</span><span class="w">        </span><span class="m">0</span>.3<span class="p">|</span><span class="w"> </span>setosa<span class="p">|</span>
</span><span id="__span-2-22"><a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a><span class="w">  </span><span class="p">|</span><span class="w">         </span><span class="m">5</span>.7<span class="p">|</span><span class="w">        </span><span class="m">3</span>.8<span class="p">|</span><span class="w">         </span><span class="m">1</span>.7<span class="p">|</span><span class="w">        </span><span class="m">0</span>.3<span class="p">|</span><span class="w"> </span>setosa<span class="p">|</span>
</span><span id="__span-2-23"><a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a><span class="w">  </span><span class="p">|</span><span class="w">         </span><span class="m">5</span>.1<span class="p">|</span><span class="w">        </span><span class="m">3</span>.8<span class="p">|</span><span class="w">         </span><span class="m">1</span>.5<span class="p">|</span><span class="w">        </span><span class="m">0</span>.3<span class="p">|</span><span class="w"> </span>setosa<span class="p">|</span>
</span><span id="__span-2-24"><a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a><span class="w">  </span>+------------+-----------+------------+-----------+-------+
</span></code></pre></div>
<p>It is a well-know "Irir Dataset" (<em>Fisher, Ronald A. "The use of multiple measurements in taxonomic problems." Annals of eugenics 7.2 (1936): 179-188.</em>, <a href="https://onlinelibrary.wiley.com/doi/pdfdirect/10.1111/j.1469-1809.1936.tb02137.x">link</a>). It contains data about different kinds of irises.</p>
<p>Our goal will be to perform data profiling on this dataset, not for all rows together, but based on the different species.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>  <span class="kn">from</span> <span class="nn">tsumugi.verification</span> <span class="kn">import</span> <span class="n">VerificationSuite</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>  <span class="kn">from</span> <span class="nn">tsumugi.analyzers</span> <span class="kn">import</span> <span class="n">Mean</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>  <span class="kn">from</span> <span class="nn">tsumugi.checks</span> <span class="kn">import</span> <span class="n">CheckBuilder</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>  <span class="n">suite</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>      <span class="n">VerificationSuite</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>      <span class="o">.</span><span class="n">on_data</span><span class="p">(</span><span class="n">iris</span><span class="p">)</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>      <span class="o">.</span><span class="n">add_required_analyzer</span><span class="p">(</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>          <span class="n">Mean</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s2">&quot;sepal_length&quot;</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="s2">&quot;species = &#39;setosa&#39;&quot;</span><span class="p">)</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>      <span class="p">)</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>      <span class="o">.</span><span class="n">add_required_analyzer</span><span class="p">(</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>          <span class="n">Mean</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s2">&quot;sepal_length&quot;</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="s2">&quot;species = &#39;versicolor&#39;&quot;</span><span class="p">)</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>      <span class="p">)</span>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>  <span class="p">)</span>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>  <span class="n">result</span> <span class="o">=</span> <span class="n">suite</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</span></code></pre></div>
<p>As a a result we will ge the following values for each metric:</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="w">     </span>entity<span class="w">      </span>instance<span class="w">                                  </span>name<span class="w">  </span>value
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">  </span><span class="m">0</span><span class="w">  </span>Column<span class="w">  </span>sepal_length<span class="w">      </span>Mean<span class="w"> </span><span class="o">(</span>where:<span class="w"> </span><span class="nv">species</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;setosa&#39;</span><span class="o">)</span><span class="w">  </span><span class="m">5</span>.006
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">  </span><span class="m">1</span><span class="w">  </span>Column<span class="w">  </span>sepal_length<span class="w">  </span>Mean<span class="w"> </span><span class="o">(</span>where:<span class="w"> </span><span class="nv">species</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;versicolor&#39;</span><span class="o">)</span><span class="w">  </span><span class="m">5</span>.936
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">  </span><span class="m">2</span><span class="w">  </span>Column<span class="w">  </span>sepal_length<span class="w">   </span>Mean<span class="w"> </span><span class="o">(</span>where:<span class="w"> </span><span class="nv">species</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;virginica&#39;</span><span class="o">)</span><span class="w">  </span><span class="m">6</span>.588
</span></code></pre></div>
<h2 id="constraints">Constraints</h2>
<p>Constraints in Tsumugi are a combination of an analyzer, assertion, and additional metadata. To create a new constraint object, it is highly recommended to use the <code>ConstraintBuilder</code>, which is a helper class with user-friendly methods. Under the hood, this class will create a new proto class with a constraint.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>  <span class="k">class</span> <span class="nc">ConstraintBuilder</span><span class="p">:</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>      <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>      <span class="k">def</span> <span class="nf">for_analyzer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">analyzer</span><span class="p">:</span> <span class="n">AbstractAnalyzer</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">          </span><span class="sd">&quot;&quot;&quot;Set an analyzer.&quot;&quot;&quot;</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>      <span class="k">def</span> <span class="nf">with_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">          </span><span class="sd">&quot;&quot;&quot;Set a name of the constraint.&quot;&quot;&quot;</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>      <span class="k">def</span> <span class="nf">with_hint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hint</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">          </span><span class="sd">&quot;&quot;&quot;Set a hint for the constraint.</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="sd">          Hint can be helpful in the case when one needs</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="sd">          to realize the reason of the constraint or why did it fail.</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="sd">          &quot;&quot;&quot;</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>      <span class="k">def</span> <span class="nf">should_be_gt_than</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>      <span class="k">def</span> <span class="nf">should_be_geq_than</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a>      <span class="k">def</span> <span class="nf">should_be_eq_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a>      <span class="k">def</span> <span class="nf">should_be_lt_than</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="__span-5-21"><a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a>      <span class="k">def</span> <span class="nf">should_be_leq_than</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="__span-5-22"><a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a>
</span><span id="__span-5-23"><a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a>      <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">suite</span><span class="o">.</span><span class="n">Check</span><span class="o">.</span><span class="n">Constraint</span><span class="p">:</span>
</span></code></pre></div>
<p><em><strong>WARNING</strong></em>: The <code>should_be_*</code> methods add a constraint value and a comparison sign to the proto message. These methods are <strong>type-sensitive</strong>! They work slightly differently depending on the type passed. For example, passing a <code>float</code> constraint for a <code>Size</code> analyzer that computes a <code>Long</code> metric under the hood will always return <code>False</code> because, for the JVM, <code>1 != 1.0</code>!</p>
<h4 id="alternative-definition-of-constraints">Alternative definition of constraints</h4>
<p>Alternatively, users can call a syntactic sugar method from the <code>CheckBuilder</code> class, which we will explain in detail later. For example, the <code>hasSize</code> method is simply a syntactic sugar on top of the definition of the <code>Constraint</code> for the <code>Size</code> analyzer, where the metric should be equal to the passed value:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>  <span class="k">def</span> <span class="nf">has_size</span><span class="p">(</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>      <span class="bp">self</span><span class="p">,</span> <span class="n">expected_size</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">hint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>  <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">      </span><span class="sd">&quot;&quot;&quot;Add a constraint that the DataFrame has size like expected.&quot;&quot;&quot;</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">with_constraint</span><span class="p">(</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>          <span class="n">ConstraintBuilder</span><span class="p">()</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>          <span class="o">.</span><span class="n">for_analyzer</span><span class="p">(</span><span class="n">Size</span><span class="p">())</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>          <span class="o">.</span><span class="n">with_hint</span><span class="p">(</span><span class="n">hint</span><span class="p">)</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>          <span class="o">.</span><span class="n">with_name</span><span class="p">(</span><span class="n">name</span> <span class="ow">or</span> <span class="s2">&quot;Size&quot;</span><span class="p">)</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>          <span class="o">.</span><span class="n">should_be_eq_to</span><span class="p">(</span><span class="n">expected_size</span><span class="p">)</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>          <span class="o">.</span><span class="n">build</span><span class="p">()</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>      <span class="p">)</span>
</span></code></pre></div>
<p>But not all the possible constraints can be created in this way. You may expecte more syntax sugar like this in the future versions.</p>
<h2 id="checks">Checks</h2>
<p>Although <code>Check</code> is a top-level structure in Deequ, it is not directly exposed in Tsumugi. Instead, it is recommended to use <code>CheckBuilder</code>. This helper class allows for easy generation of the completed <code>proto.suite.Check</code> object, which is actually a protobuf message class.</p>
<h3 id="level">Level</h3>
<p>Each check has its own severity level. Currently, upstream Deequ only supports <code>Error</code> and <code>Warning</code> levels, with <code>Warning</code> being the default in both Tsumugi and upstream Deequ. You can modify the severity level of a <code>Check</code> in the builder by calling the method <code>with_level(level)</code>, where <code>level</code> is a value from the <code>CheckLevel</code> enumeration.</p>
<h3 id="description">Description</h3>
<p>Each check can have its own description that will be exported to the results. The description is simply a regular string. You can modify it using the <code>with_description(description)</code> method of the <code>CheckBuilder</code> class.</p>
<h3 id="constraints_1">Constraints</h3>
<p><code>CheckBuilder</code> provides two generic methods for adding constraints:</p>
<ol>
<li><code>with_constraint(constraint)</code>: This method expects an already built <code>Constraint</code> and adds it to the list of constraints.</li>
<li><code>with_constraints(constraints)</code>: This method expects a collection of built constraints. It's important to note that this method replaces any existing constraints!</li>
</ol>
<p>Additionally, <code>CheckBuilder</code> provides a lot of syntactic sugar, such as <code>has_size</code> or <code>is_complete</code>. These methods offer a simpler approach to adding constraints. However, the trade-off is that not all possible constraints have a corresponding syntactic sugar method.</p>
<h2 id="verificationsuite">VerificationSuite</h2>
<p>The <code>VerificationSuite</code> is not directly accessible in Tsumugi. Instead, it is recommended to use the <code>VerificationRunBuilder</code>. You can create a builder either by directly providing a <code>DataFrame</code> or by calling the backward-compatibility helper <code>VerificationSuite.on_date(df)</code>, which mimics the behavior of <code>python-deequ</code>.</p>
<h3 id="row-level-results">Row-level results</h3>
<p>Row-level results are not returned by default. To request them, simply call the <code>with_row_level_results()</code> method of the builder. Otherwise, the <code>row_level_result</code> attribute of the object returned by Tsumugi will be <code>None</code>.</p>
<h3 id="required-analyzers">Required analyzers</h3>
<p>There are two methods for adding required analyzers. The first is <code>add_required_analyzers(analyzers)</code>, which replaces all existing required analyzers with values from the provided collection. The second method is <code>add_required_analyzer</code>, which appends an additional analyzer to the existing ones. Both methods expect an <code>AbstractAnalyzer</code> object, so users don't need to manually create protobuf classes from analyzers.</p>
<h3 id="checks_1">Checks</h3>
<p>The same two methods are provided for adding checks:</p>
<ul>
<li><code>add_check(check)</code> appends a single check to the suite</li>
<li><code>add_checks(checks)</code> replace all the already added checks by the provided collection</li>
</ul>
<p>When adding a <code>Check</code>, it is expected to be a protobuf class. Therefore, users need to explicitly call <code>CheckBuilder()....build()</code> themselves.</p>
<h3 id="anomaly-detection">Anomaly Detection</h3>
<p>Similar to required analyzers and checks, two methods are provided: one for adding a single anomaly detection case, and another for replacing all anomaly detection cases with the provided collection:</p>
<ul>
<li><code>add_anomaly_detection</code></li>
<li><code>add_anomaly_detections</code></li>
</ul>
<h4 id="key-and-repository">Key and repository</h4>
<p>By design of the upstream Deequ, any anomaly detection requires both a repository and a dataset key. There are two separate methods for this in the <code>VerificationRunBuilder</code>. One method adds a <code>FileSystemRepository</code> that should be a path to the JSON file, while the other adds a <code>SparkTableRepository</code> that expects a Spark table name.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>  <span class="k">def</span> <span class="nf">with_fs_repository_and_key</span><span class="p">(</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>      <span class="bp">self</span><span class="p">,</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>      <span class="n">filepath</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>      <span class="n">dataset_date</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>      <span class="n">dataset_tags</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>  <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">      </span><span class="sd">&quot;&quot;&quot;Add a FileSystem repository and date and tags for the ResultKey.&quot;&quot;&quot;</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>  <span class="k">def</span> <span class="nf">with_table_repository_and_key</span><span class="p">(</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>      <span class="bp">self</span><span class="p">,</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>      <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>      <span class="n">dataset_date</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>      <span class="n">dateset_tags</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>  <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="w">      </span><span class="sd">&quot;&quot;&quot;Add a Table repository and date and tags for the ResultKey.&quot;&quot;&quot;</span>
</span></code></pre></div>
<p>The <code>dataset_date</code> is the most crucial element here, as it serves as the value Deequ will use to filter the required time series data of metrics for anomaly detection. This value should be a valid Java <code>Long</code> (less than or equal to <code>9,223,372,036,854,775,807</code>). Passing a larger value may lead to unexpected behavior. It is also not recommended to use negative values, as by design and logic, it should represent something similar to a timestamp.</p>
<p>The <code>dataset_tags</code> parameter is not used within Deequ itself but is exposed to the output repository. If you plan to use the repository directly (as a table or as JSON), you can include additional information here.</p>
<h4 id="anomaly-detection-builder">Anomaly Detection Builder</h4>
<p>As described in the <a href="../../concepts/concepts/#anomaly-detection">concepts</a> section, anomaly detection is a combination of an analyzer, strategy, and additional metadata. To simplify the creation of AD-checks, an <code>AnomalyDetectionBuilder</code> is provided. Calling <code>build()</code> on this builder will generate a complete protobuf class for the defined anomaly detection case.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>  <span class="k">class</span> <span class="nc">AnomalyDetectionBuilder</span><span class="p">:</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">      </span><span class="sd">&quot;&quot;&quot;Helper object to build AnomalyDetection check.&quot;&quot;&quot;</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>      <span class="k">def</span> <span class="nf">for_analyzer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">analyzer</span><span class="p">:</span> <span class="n">AbstractAnalyzer</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">          </span><span class="sd">&quot;&quot;&quot;Add an analyzer.&quot;&quot;&quot;</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>      <span class="k">def</span> <span class="nf">with_strategy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">strategy</span><span class="p">:</span> <span class="n">AbstractStrategy</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">          </span><span class="sd">&quot;&quot;&quot;Add a strategy.&quot;&quot;&quot;</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>      <span class="k">def</span> <span class="nf">with_check_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="n">CheckLevel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="w">          </span><span class="sd">&quot;&quot;&quot;Set a severity level.&quot;&quot;&quot;</span>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>      <span class="k">def</span> <span class="nf">with_description</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="w">          </span><span class="sd">&quot;&quot;&quot;Add a description.&quot;&quot;&quot;</span>
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>
</span><span id="__span-8-16"><a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a>      <span class="k">def</span> <span class="nf">with_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tags</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="__span-8-17"><a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="w">          </span><span class="sd">&quot;&quot;&quot;Add tags.&quot;&quot;&quot;</span>
</span><span id="__span-8-18"><a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a>
</span><span id="__span-8-19"><a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a>      <span class="k">def</span> <span class="nf">after_date</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="__span-8-20"><a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a><span class="w">          </span><span class="sd">&quot;&quot;&quot;Set a minimal dataset date value</span>
</span><span id="__span-8-21"><a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a>
</span><span id="__span-8-22"><a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a><span class="sd">          This value will be used to filter out part of</span>
</span><span id="__span-8-23"><a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a><span class="sd">          the timeseries of metrics.</span>
</span><span id="__span-8-24"><a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a><span class="sd">          &quot;&quot;&quot;</span>
</span><span id="__span-8-25"><a id="__codelineno-8-25" name="__codelineno-8-25" href="#__codelineno-8-25"></a>
</span><span id="__span-8-26"><a id="__codelineno-8-26" name="__codelineno-8-26" href="#__codelineno-8-26"></a>      <span class="k">def</span> <span class="nf">before_date</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
</span><span id="__span-8-27"><a id="__codelineno-8-27" name="__codelineno-8-27" href="#__codelineno-8-27"></a><span class="w">          </span><span class="sd">&quot;&quot;&quot;Set a maximal dataset date value</span>
</span><span id="__span-8-28"><a id="__codelineno-8-28" name="__codelineno-8-28" href="#__codelineno-8-28"></a>
</span><span id="__span-8-29"><a id="__codelineno-8-29" name="__codelineno-8-29" href="#__codelineno-8-29"></a><span class="sd">          This value will be used to filter out part of</span>
</span><span id="__span-8-30"><a id="__codelineno-8-30" name="__codelineno-8-30" href="#__codelineno-8-30"></a><span class="sd">          the timeseries of metrics.</span>
</span><span id="__span-8-31"><a id="__codelineno-8-31" name="__codelineno-8-31" href="#__codelineno-8-31"></a><span class="sd">          &quot;&quot;&quot;</span>
</span></code></pre></div>
<p>All the strategies are implemented in the same way as analyzers. They are actually just dataclasses with a single inherited private method that converts a dataclass to the corresponding protobuf class.</p>
<p><em><strong>Note</strong></em>: This is not a bug, but a feature of upstream Deequ. If you run your anomaly detection case with the same <code>dataset_tag</code> twice in a row, the first run will be compared to a previous run, but the second run will be compared with the first run. To avoid this behavior, add any value less than your <code>dataset_tag</code> to the <code>before_date</code> parameter in the builder.</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../concepts/usecases/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Usecases">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Usecases
              </div>
            </div>
          </a>
        
        
          
          <a href="../reference/SUMMARY/" class="md-footer__link md-footer__link--next" aria-label="Next: API Reference">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                API Reference
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.footer", "navigation.indexes", "navigation.expand", "content.tabs.link", "content.code.copy", "content.code.select"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.56dfad97.min.js"></script>
      
    
  </body>
</html>